(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{509:function(v,_,t){"use strict";t.r(_);var a=t(20),s=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("p",[v._v("BlockChain")]),v._v(" "),t("p",[v._v("[toc]")]),v._v(" "),t("p",[t("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2017/12/blockchain-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("区块链入门教程"),t("OutboundLink")],1)]),v._v(" "),t("h2",{attrs:{id:"区块链"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#区块链"}},[v._v("#")]),v._v(" 区块链")]),v._v(" "),t("ul",[t("li",[v._v("==是一种特殊的分布式数据库==")]),v._v(" "),t("li",[v._v("区块链没有管理员，它是彻底无中心的")])]),v._v(" "),t("h2",{attrs:{id:"区块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#区块"}},[v._v("#")]),v._v(" 区块")]),v._v(" "),t("p",[v._v("区块链由一个个区块（block）组成。区块很像数据库的记录，每次写入数据，就是创建一个区块。")]),v._v(" "),t("p",[v._v("每个区块包含两个部分")]),v._v(" "),t("ol",[t("li",[v._v("区块头（Head）：记录当前区块的特征值")]),v._v(" "),t("li",[v._v("区块体（Body）：实际数据")])]),v._v(" "),t("p",[v._v("区块头包含了当前区块的多项特征值:")]),v._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("生成时间\n实际数据（即区块体）的哈希\n上一个区块的哈希\n...\n")])]),v._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[v._v("1")]),t("br"),t("span",{staticClass:"line-number"},[v._v("2")]),t("br"),t("span",{staticClass:"line-number"},[v._v("3")]),t("br"),t("span",{staticClass:"line-number"},[v._v("4")]),t("br")])]),t("p",[v._v("区块与哈希是一一对应的，每个区块的哈希都是针对 "),t("strong",[v._v('"区块头"（Head）')]),v._v(" 计算的。也就是说，"),t("u",[v._v("把区块头的各项特征值，按照顺序连接在一起，组成一个很长的字符串，再对这个字符串计算哈希。")])]),v._v(" "),t("blockquote",[t("p",[v._v("Hash = SHA256( 区块头 )")])]),v._v(" "),t("p",[v._v("区块头包含很多内容，其中有当前区块体的哈希，还有上一个区块的哈希。这意味着，如果当前区块体的内容变了，或者上一个区块的哈希变了，一定会引起当前区块的哈希改变。")]),v._v(" "),t("p",[v._v("正是通过这种联动机制，区块链保证了自身的可靠性，数据一旦写入，就无法被篡改。这就像历史一样，发生了就是发生了，从此再无法改变。(哈希的计算很耗时，短时间内修改多个区块几乎不可能发生，除非有人==掌握了全网51%以上的计算能力==。)")]),v._v(" "),t("h2",{attrs:{id:"采矿"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#采矿"}},[v._v("#")]),v._v(" 采矿")]),v._v(" "),t("p",[v._v("由于必须保证节点之间的同步，所以新区块的添加速度不能太快。")]),v._v(" "),t("p",[v._v("产出速度不是通过命令达成的，而是故意设置了海量的计算。也就是说，只有通过极其大量的计算，才能得到当前区块的有效哈希，从而把新区块添加到区块链。由于计算量太大，所以快不起来。")]),v._v(" "),t("p",[v._v("这个过程就叫做采矿（mining）。计算哈希的机器就叫做矿机，操作矿机的人就叫做矿工。")]),v._v(" "),t("h2",{attrs:{id:"难度系数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#难度系数"}},[v._v("#")]),v._v(" 难度系数")]),v._v(" "),t("p",[v._v("区块链协议规定，使用一个常量除以难度系数，可以得到目标值（target）。显然，难度系数越大，目标值就越小。")]),v._v(" "),t("p",[v._v("哈希的有效性跟目标值密切相关，只有小于目标值的哈希才是有效的，否则哈希无效，必须重算。由于目标值非常小，哈希小于该值的机会极其渺茫。这就是采矿如此之慢的根本原因。")]),v._v(" "),t("p",[v._v("当前区块的哈希由区块头唯一决定。如果要对同一个区块反复计算哈希，就意味着，区块头必须不停地变化，否则不可能算出不一样的哈希。")]),v._v(" "),t("p",[v._v("区块头里面所有的特征值都是固定的，为了让区块头产生变化，中本聪故意增加了一个随机项，叫做==Nonce==。")]),v._v(" "),t("p",[t("u",[v._v("Nonce 是一个随机值，矿工的作用其实就是猜出 Nonce 的值，使得区块头的哈希可以小于目标值，从而能够写入区块链。")])]),v._v(" "),t("p",[v._v("Nonce 是非常难猜的，目前只能通过穷举法一个个试错。根据协议，Nonce 是一个32位的二进制值，即最大可以到21.47亿。")]),v._v(" "),t("h2",{attrs:{id:"难度系数的动态调节"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#难度系数的动态调节"}},[v._v("#")]),v._v(" 难度系数的动态调节")]),v._v(" "),t("p",[v._v("采矿具有随机性，没法保证正好十分钟产出一个区块，有时一分钟就算出来了，有时几个小时可能也没结果。总体来看，随着硬件设备的提升，以及矿机的数量增长，计算速度一定会越来越快。")]),v._v(" "),t("p",[v._v("为了将产出速率恒定在十分钟，中本聪还设计了难度系数的动态调节机制。")]),v._v(" "),t("p",[v._v("他规定，难度系数"),t("strong",[v._v("每两周（2016个区块）调整一次")]),v._v("。如果这两周里面，区块的平均生成速度是9分钟，就意味着比法定速度快了10%，因此接下来的难度系数就要调高10%；如果平均生成速度是11分钟，就意味着比法定速度慢了10%，因此接下来的难度系数就要调低10%。")]),v._v(" "),t("p",[v._v("难度系数越调越高（目标值越来越小），导致了采矿越来越难。")]),v._v(" "),t("h2",{attrs:{id:"区块链的分叉"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#区块链的分叉"}},[v._v("#")]),v._v(" 区块链的分叉")]),v._v(" "),t("p",[v._v("如果两个人同时向区块链写入数据，也就是说，同时有两个区块加入，因为它们都连着前一个区块，就形成了分叉。这时应该采纳哪一个区块呢？")]),v._v(" "),t("p",[v._v('新节点总是采用最长的那条区块链。如果区块链有分叉，将看哪个分支在分叉点后面，先达到6个新区块（称为"'),t("strong",[v._v("六次确认")]),v._v('"）。按照10分钟一个区块计算，一小时就可以确认。')]),v._v(" "),t("p",[v._v("由于新区块的生成速度由计算能力决定，所以这条规则就是说，拥有大多数计算能力的那条分支，就是正宗的区块链。")]),v._v(" "),t("h2",{attrs:{id:"结束"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结束"}},[v._v("#")]),v._v(" 结束")]),v._v(" "),t("p",[v._v("保证数据的可靠性，区块链也有自己的代价。")]),v._v(" "),t("ul",[t("li",[v._v("一是效率，数据写入区块链，最少要等待十分钟，所有节点都同步数据，则需要更多的时间；")]),v._v(" "),t("li",[v._v("二是能耗，区块的生成需要矿工进行无数无意义的计算，这是非常耗费能源的。")])]),v._v(" "),t("p",[v._v("因此，区块链的适用场景，其实非常有限。"),t("strong",[v._v("目前，区块链最大的应用场景（可能也是唯一的应用场景），就是以比特币为代表的加密货币")]),v._v("。")])])}),[],!1,null,null,null);_.default=s.exports}}]);
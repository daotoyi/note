(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{585:function(e,s,l){"use strict";l.r(s);var v=l(20),_=Object(v.a)({},(function(){var e=this,s=e.$createElement,l=e._self._c||s;return l("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[l("p",[e._v("Linux_ldconfig/PATH")]),e._v(" "),l("p",[e._v("[toc]")]),e._v(" "),l("p",[e._v("参考：")]),e._v(" "),l("ul",[l("li",[e._v("http://man.linuxde.net/ldconfig")]),e._v(" "),l("li",[e._v("https://blog.csdn.net/chenzixun0/article/details/56278632\n主要是在默认搜寻目录"),l("code",[e._v("/lib")]),e._v("和"),l("code",[e._v("/usr/lib")]),e._v("以及动态库配置文件"),l("code",[e._v("/etc/ld.so.conf")]),e._v("内所列的目录下，搜索出可共享的动态链接库（格式如"),l("code",[e._v("lib*.so*")]),e._v("）,进而"),l("strong",[e._v("创建出")]),e._v("动态装入程序("),l("code",[e._v("ld.so")]),e._v(")所需的连接和缓存文件，缓存文件默认为"),l("code",[e._v("/etc/ld.so.cache")]),e._v("，此文件保存已排好序的动态链接库名字列表。linux下的共享库机制采用了类似高速缓存机制，将库信息保存在"),l("code",[e._v("/etc/ld.so.cache")]),e._v("，程序连接的时候首先从这个文件里查找，然后再到"),l("code",[e._v("ld.so.conf")]),e._v("的路径中查找。为了让动态链接库为系统所共享，需运行动态链接库的管理命令"),l("code",[e._v("ldconfig")]),e._v("，此执行程序存放在/sbin目录下。")])]),e._v(" "),l("p",[l("strong",[e._v("ldconfig命令参数：")])]),e._v(" "),l("ul",[l("li",[e._v("-v或–verbose:ldconfig将显示正在扫描的目录及搜索到的动态链接库,还有它所创建的连接的名字")]),e._v(" "),l("li",[e._v("-f CONF：此选项指定动态链接库的配置文件为CONF，系统默认为/etc/ld.so.conf")]),e._v(" "),l("li",[e._v("-p或–print-cache：此选项指示ldconfig打印出当前缓存文件所保存的所有共享库的名字。")]),e._v(" "),l("li",[e._v("-V：此选项打印出ldconfig的版本信息，而后退出。")])]),e._v(" "),l("p",[e._v("从以上可知：")]),e._v(" "),l("ul",[l("li",[e._v("在"),l("code",[e._v("/lib")]),e._v("和"),l("code",[e._v("/usr/lib")]),e._v("里面添加库文件，是无需将路径添加到"),l("code",[e._v("/etc/ld.so.conf")]),e._v("中去的，但是需要使用命令"),l("code",[e._v("sudo ldconfig")]),e._v(",否则无法找到库文件。在上述两个目录之外的路径添加库文件，需要先将将库文件的路径追加入"),l("code",[e._v("/etc/ld.so.conf")]),e._v("，假设库文件在"),l("code",[e._v("/usr/local/mysql/lib")]),e._v("中，可以使用命令：")])]),e._v(" "),l("div",{staticClass:"language- line-numbers-mode"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[e._v('`echo "/usr/local/mysql/lib" >> /etc/ld.so.conf\nsudo ldconfig -v | grep mysql  # 查看mysql库文件是否被找到。`\n')])]),e._v(" "),l("div",{staticClass:"line-numbers-wrapper"},[l("span",{staticClass:"line-number"},[e._v("1")]),l("br"),l("span",{staticClass:"line-number"},[e._v("2")]),l("br")])]),l("ul",[l("li",[e._v("若在"),l("code",[e._v("/lib")]),e._v("和"),l("code",[e._v("/usr/lib")]),e._v("之外的目录中添加库文件，而又不在"),l("code",[e._v("/etc/ld.so.conf")]),e._v("中写入路径，此时可以用添加环境变量"),l("code",[e._v("LD_LIBRARY_PATH")]),e._v("的做法让系统识别到库文件。")])]),e._v(" "),l("div",{staticClass:"language- line-numbers-mode"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[e._v("export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/mysql/lib\n")])]),e._v(" "),l("div",{staticClass:"line-numbers-wrapper"},[l("span",{staticClass:"line-number"},[e._v("1")]),l("br")])]),l("ul",[l("li",[e._v("可以在"),l("code",[e._v("/etc/ld.so.conf.d/")]),e._v("目录下创建"),l("code",[e._v(".conf")]),e._v("文件来添加库路径。在默认的"),l("code",[e._v("/etc/ld.so.conf")]),e._v("文件中，可以看到有如下内容：")])]),e._v(" "),l("div",{staticClass:"language- line-numbers-mode"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[e._v("include /etc/ld.so.conf.d`\n")])]),e._v(" "),l("div",{staticClass:"line-numbers-wrapper"},[l("span",{staticClass:"line-number"},[e._v("1")]),l("br")])]),l("p",[e._v("说明"),l("code",[e._v("/etc/ld.so.conf.d/")]),e._v("目录下所有的"),l("code",[e._v(".conf")]),e._v("文件都被包含，文件中所有的路径都会被搜索到。\n例如：")]),e._v(" "),l("div",{staticClass:"language- line-numbers-mode"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[e._v('touch opencv.conf\necho "/user/local/lib" > opencv.conf\nsudo ldconfig`\n')])]),e._v(" "),l("div",{staticClass:"line-numbers-wrapper"},[l("span",{staticClass:"line-number"},[e._v("1")]),l("br"),l("span",{staticClass:"line-number"},[e._v("2")]),l("br"),l("span",{staticClass:"line-number"},[e._v("3")]),l("br")])]),l("ul",[l("li",[l("p",[l("strong",[e._v("/etc/profile")]),e._v("\n用于设置系统级的环境变量和启动程序，在这个文件下配置会对所有用户生效。当用户登录(login)时，文件会被执行，并从/etc/profile.d目录的配置文件中查找shell设置。如果对/etc/profile修改的话必须重启才会生效")])]),e._v(" "),l("li",[l("p",[l("strong",[e._v("/etc/bash.bashrc")]),e._v("\n每一个运行bash shell的用户执行此文件.当bash shell被打开时,该文件被读取。如果想对所有使用bash的用户修改某个配置并在以后打开的bash都生效的话可以修改这个文件，修改之后不用重启，重新打开一个bash即可生效。")])]),e._v(" "),l("li",[l("p",[l("strong",[e._v("~/.profile")]),e._v("\n每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次!默认情况下,他设置一些环境变量,执行用户的.bashrc文件.")])]),e._v(" "),l("li",[l("p",[l("strong",[e._v("~/.bashrc")]),e._v("\n该文件包含专用于你的bash shell的bash信息,当登录时以及每次打开新的shell时,该该文件被读取.")])]),e._v(" "),l("li",[l("p",[l("strong",[e._v("~/.bash_logout")]),e._v("\n当每次退出系统(退出bash shell)时,执行该文件，通常存放清理工作的命令。")])])]),e._v(" "),l("h2",{attrs:{id:"执行顺序"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#执行顺序"}},[e._v("#")]),e._v(" 执行顺序")]),e._v(" "),l("p",[l("strong",[e._v("登陆shell")]),e._v("\n登陆shell时，首先执行"),l("code",[e._v("/etc/profile")]),e._v("，之后执行用户目录下的"),l("code",[e._v("~/.profile")]),e._v(","),l("code",[e._v("~/.profile")]),e._v("中会执行"),l("code",[e._v("~/.bashrc")]),e._v("。")]),e._v(" "),l("p",[l("strong",[e._v("交互式非登陆shell")]),e._v("\n首先执行"),l("code",[e._v("/etc/bash.bashrc")]),e._v("，之后执行"),l("code",[e._v("~/.bashrc")])])])}),[],!1,null,null,null);s.default=_.exports}}]);
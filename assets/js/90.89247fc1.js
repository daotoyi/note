(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{571:function(s,a,e){"use strict";e.r(a);var t=e(20),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[e("a",{attrs:{href:"https://www.cyberciti.biz/faq/what-is-a-routing-table/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"route-表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#route-表"}},[s._v("#")]),s._v(" route 表")]),s._v(" "),e("p",[s._v("通过 "),e("code",[s._v("route")]),s._v(" 命令查看 Linux 内核的路由表：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM_139_74_centos ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         gateway         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         UG    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.10       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.139")]),s._v(".128.1    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.255 UGH   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.139")]),s._v(".128.0    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".224.0   U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\nlink-local      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" docker0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" br-0ab63c131848\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.19")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" br-bccbfb788da0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" br-7485db25f958\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM_139_74_centos ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.139")]),s._v(".128.1    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         UG    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.10       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.139")]),s._v(".128.1    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.255 UGH   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.139")]),s._v(".128.0    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".224.0   U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("169.254")]),s._v(".0.0     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" eth0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" docker0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" br-0ab63c131848\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.19")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" br-bccbfb788da0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),s._v(".0.0      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0     U     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" br-7485db25f958\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("p",[s._v("各列字段说明：")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("列")]),s._v(" "),e("th",[s._v("含义")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("Destination")]),s._v(" "),e("td",[s._v("目标网络或目标主机。Destination 为 default（"),e("code",[s._v("0.0.0.0")]),s._v("）时，表示这个是默认网关，所有数据都发到这个网关（这里是 "),e("code",[s._v("10.139.128.1")]),s._v("）")])]),s._v(" "),e("tr",[e("td",[s._v("Gateway")]),s._v(" "),e("td",[s._v("网关地址，"),e("code",[s._v("0.0.0.0")]),s._v(" 表示当前记录对应的 Destination 跟本机在同一个网段，通信时不需要经过网关")])]),s._v(" "),e("tr",[e("td",[s._v("Genmask")]),s._v(" "),e("td",[s._v("Destination 字段的网络掩码，Destination 是主机时需要设置为 "),e("code",[s._v("255.255.255.255")]),s._v("，是默认路由时会设置为 "),e("code",[s._v("0.0.0.0")])])]),s._v(" "),e("tr",[e("td",[s._v("Flags")]),s._v(" "),e("td",[s._v("标记，含义参考表格后面的解释")])]),s._v(" "),e("tr",[e("td",[s._v("Metric")]),s._v(" "),e("td",[s._v("路由距离，到达指定网络所需的中转数，是大型局域网和广域网设置所必需的 （不在Linux内核中使用。）")])]),s._v(" "),e("tr",[e("td",[s._v("Ref")]),s._v(" "),e("td",[s._v("路由项引用次数 （不在Linux内核中使用。）")])]),s._v(" "),e("tr",[e("td",[s._v("Use")]),s._v(" "),e("td",[s._v("此路由项被路由软件查找的次数")])]),s._v(" "),e("tr",[e("td",[s._v("Iface")]),s._v(" "),e("td",[s._v("网卡名字，例如 "),e("code",[s._v("eth0")])])])])]),s._v(" "),e("p",[s._v("Flags 含义：")]),s._v(" "),e("ul",[e("li",[s._v("U 路由是活动的")]),s._v(" "),e("li",[s._v("H 目标是个主机")]),s._v(" "),e("li",[s._v("G 需要经过网关")]),s._v(" "),e("li",[s._v("R 恢复动态路由产生的表项")]),s._v(" "),e("li",[s._v("D 由路由的后台程序动态地安装")]),s._v(" "),e("li",[s._v("M 由路由的后台程序修改")]),s._v(" "),e("li",[s._v("! 拒绝路由")])]),s._v(" "),e("h2",{attrs:{id:"主机路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主机路由"}},[s._v("#")]),s._v(" 主机路由")]),s._v(" "),e("p",[s._v("路由表中指向单个 IP 地址或主机名的路由记录，其 Flags 字段为 H。下面示例中，对于 "),e("code",[s._v("10.0.0.10")]),s._v(" 这个主机，通过网关 "),e("code",[s._v("10.139.128.1")]),s._v(" 网关路由：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n10.0.0.10       10.139.128.1    255.255.255.255 UGH   0      0        0 eth0\n...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"网络路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络路由"}},[s._v("#")]),s._v(" 网络路由")]),s._v(" "),e("p",[s._v("主机可以到达的网络。下面示例中，对于 "),e("code",[s._v("10.0.0.0/24")]),s._v(" 这个网络，通过网关 "),e("code",[s._v("10.139.128.1")]),s._v(" 网关路由：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n10.0.0.0        10.139.128.1    255.255.255.0   UG    0      0        0 eth0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"默认路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#默认路由"}},[s._v("#")]),s._v(" 默认路由")]),s._v(" "),e("p",[s._v("当目标主机的 IP 地址或网络不在路由表中时，数据包就被发送到默认路由（默认网关）上。默认路由的 "),e("code",[s._v("Destination")]),s._v(" 是 default 或 "),e("code",[s._v("0.0.0.0")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         gateway         0.0.0.0         UG    0      0        0 eth0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("route 命令可以显示或设置 Linux 内核中的路由表，主要是静态路由。")]),s._v(" "),e("p",[s._v("对于局域网中的 Linux 主机，要想访问 Internet，需要将局域网的网关 IP 地址设置为这个主机的默认路由。在命令行中通过 "),e("code",[s._v("route")]),s._v(" 命令添加的路由在网卡重启或机器重启后失效。可以在 "),e("code",[s._v("/etc/rc.local")]),s._v(" 中添加 route 命令来保证路由设置永久有效。")]),s._v(" "),e("p",[s._v("选项:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-A")]),s._v("：设置地址类型")]),s._v(" "),e("li",[e("code",[s._v("-C")]),s._v("：打印 Linux 内核的路由缓存")]),s._v(" "),e("li",[e("code",[s._v("-v")]),s._v("：显示详细信息")]),s._v(" "),e("li",[e("code",[s._v("-n")]),s._v("：不执行 DNS 反向查找，直接显示数字形式的 IP 地址")]),s._v(" "),e("li",[e("code",[s._v("-e")]),s._v("：netstat 格式显示路由表")]),s._v(" "),e("li",[e("code",[s._v("-net")]),s._v("：到一个网络的路由表")]),s._v(" "),e("li",[e("code",[s._v("-host")]),s._v("：到一个主机的路由表")])]),s._v(" "),e("p",[s._v("参数：")]),s._v(" "),e("ul",[e("li",[s._v("add：增加路由记录")]),s._v(" "),e("li",[s._v("del：删除路由记录")]),s._v(" "),e("li",[s._v("target：目的网络或目的主机")]),s._v(" "),e("li",[s._v("gw：设置默认网关")]),s._v(" "),e("li",[s._v("mss：设置TCP的最大区块长度（MSS），单位MB")]),s._v(" "),e("li",[s._v("window：指定通过路由表的TCP连接的TCP窗口大小")]),s._v(" "),e("li",[s._v("dev：路由记录所表示的网络接口")])]),s._v(" "),e("h2",{attrs:{id:"添加路由-add"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加路由-add"}},[s._v("#")]),s._v(" 添加路由 add")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加到主机的路由")]),s._v("\nroute "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" –host "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".168.110 dev eth0\nroute "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" –host "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".168.119 gw "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".168.1\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加到网络的路由")]),s._v("\nroute "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" –net IP netmask MASK eth0\nroute "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" –net IP netmask MASK gw IP\nroute "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" –net IP/24 eth1\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加默认网关")]),s._v("\nroute "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" default gw IP\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除路由")]),s._v("\nroute del –host "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".168.110 dev eth0\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("可以添加一条可用路由，或添加一条要屏蔽的路由。")]),s._v(" "),e("h3",{attrs:{id:"添加路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加路由"}},[s._v("#")]),s._v(" 添加路由")]),s._v(" "),e("h4",{attrs:{id:"添加主机路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加主机路由"}},[s._v("#")]),s._v(" 添加主机路由")]),s._v(" "),e("p",[s._v("添加主机路由时，需要指定网络 ID 和主机 ID，此时需要设置 "),e("code",[s._v("netmask 255.255.255.255")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\n[root@VM_139_74_centos ~]\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n10.0.0.10       10.139.128.1    255.255.255.255 UGH   0      0        0 eth0\n...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h4",{attrs:{id:"添加网络路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加网络路由"}},[s._v("#")]),s._v(" 添加网络路由")]),s._v(" "),e("p",[s._v("添加网络路由时，只需指定网络 ID，通过 "),e("code",[s._v("netmask")]),s._v(" 设置掩码长度：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\n[root@VM_139_74_centos ~]\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n10.0.0.0        10.139.128.1    255.255.255.0   UG    0      0        0 eth0\n...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h4",{attrs:{id:"添加添加同一个局域网的主机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加添加同一个局域网的主机"}},[s._v("#")]),s._v(" 添加添加同一个局域网的主机")]),s._v(" "),e("p",[s._v("不指定 gw 选项时，添加的路由记录不使用网关：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\n[root@VM_139_74_centos ~]\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n224.0.0.0       0.0.0.0         240.0.0.0       U     0      0        0 eth0\n...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"屏蔽路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#屏蔽路由"}},[s._v("#")]),s._v(" 屏蔽路由")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\n[root@VM_139_74_centos ~]\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n224.0.0.0       -               240.0.0.0       !     0      -        0 -\n...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"删除路由记录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除路由记录"}},[s._v("#")]),s._v(" 删除路由记录")]),s._v(" "),e("p",[s._v("跟添加路由类似，可以删除一条可用路由，或删除一条屏蔽的路由。")]),s._v(" "),e("h3",{attrs:{id:"删除可用路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除可用路由"}},[s._v("#")]),s._v(" 删除可用路由")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("route del -net 224.0.0.0 netmask 240.0.0.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"删除屏蔽的路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除屏蔽的路由"}},[s._v("#")]),s._v(" 删除屏蔽的路由")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("route del -net 224.0.0.0 netmask 240.0.0.0 reject\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"删除和添加设置默认网关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除和添加设置默认网关"}},[s._v("#")]),s._v(" 删除和添加设置默认网关")]),s._v(" "),e("p",[s._v("添加或删除默认网关时，Linux 会自动检查网关的可用性：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@VM_139_74_centos ~]\nSIOCADDRT: Network is unreachable\n[root@VM_139_74_centos ~]\nSIOCDELRT: No such process\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);